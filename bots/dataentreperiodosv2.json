{"flow":{"onboarding":{"$contentActions":[{"input":{"bypass":false,"$cardContent":{"document":{"id":"691d94a6-ceeb-4746-8ae2-2333f28ad282","type":"text/plain"},"editable":false,"deletable":false,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"welcome","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"e72db9e9-d554-4977-bd52-4a78a70490bf","$connId":"con_3","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"onboarding","root":true,"$title":"Início","$position":{"top":"120px","left":"644px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"fallback":{"$contentActions":[{"input":{"bypass":true,"$cardContent":{"document":{"id":"edeb6e11-05ae-4e70-adf7-6b6eb621ad4b","type":"text/plain"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"error","conditions":[{"source":"input","comparison":"matches","values":[".*"]}],"$id":"1c76b391-e5bd-4708-b067-b203cb712336","$connId":"con_8","$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"fallback","$title":"Exceções","$position":{"top":"120px","left":"877px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"welcome":{"$contentActions":[{"action":{"$id":"e1d75a46-8026-4e13-9751-ad9f8d504940","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000000","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"action":{"$id":"8537558d-2610-4bd3-856e-d780c3cfd1b6","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Olá! {{contact.name}}!\nSeja bem-vindo(a)!"},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000001","type":"text/plain","content":"Olá! {{contact.name}}!\nSeja bem-vindo(a)!"},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"16a9a94e-3ba1-4993-9919-1bef2a23995b","type":"text/plain","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[{"stateId":"cc19161f-32cc-4db7-b06d-c30e938bed0d","typeOfStateId":"state","$connId":"con_13","$id":"35b38bcb-50d6-4878-a5ab-8a0078c05fba","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"welcome","$title":"Boas vindas","$position":{"top":"240px","left":"644px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"error":{"$contentActions":[{"action":{"$id":"b5f8a8db-d50d-4988-969b-cca28626df02","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000002","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"action":{"$id":"c161547e-6c1f-4c1c-9a64-13e44c858d44","$typeOfContent":"","type":"SendMessage","settings":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"Desculpe, não consegui entender!"},"$cardContent":{"document":{"id":"00000000-0000-0000-0000-000000000003","type":"text/plain","content":"Desculpe, não consegui entender!"},"editable":true,"deletable":true,"position":"left","editing":false}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"82a6786f-0800-4327-8dc0-d649c12ba88e","type":"text/plain"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"onboarding","$invalid":false},"$tags":[],"id":"error","$title":"Erro padrão","$position":{"top":"240px","left":"877px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"cc19161f-32cc-4db7-b06d-c30e938bed0d":{"$contentActions":[{"action":{"$id":"d5716915-30dc-4f03-b5e2-49245543a119","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"e5a83392-6c78-4d1d-a1c0-7d1225a19248","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"e5a83392-6c78-4d1d-a1c0-7d1225a19248","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"a9fc7d51-8452-4f65-8a20-16c946039c90","$typeOfContent":"text","type":"SendMessage","settings":{"id":"dd7fa5f7-51f6-4763-a614-024e309c85b5","type":"text/plain","content":"Digite a data inicial (DD/MM/AAAA)","metadata":{}},"$cardContent":{"document":{"id":"dd7fa5f7-51f6-4763-a614-024e309c85b5","type":"text/plain","content":"Digite a data inicial (DD/MM/AAAA)"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"49e40147-b111-46b4-b640-cf7939b5e018","type":"text/plain","textContent":"Entrada do usuário","content":"initialDate"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"initialDate"},"$invalid":false}],"$conditionOutputs":[{"stateId":"d5f7c7b6-fd6c-44f2-aa9a-319f7d256c4f","typeOfStateId":"state","$connId":"con_18","$id":"f19333aa-a6c1-4549-8f91-f95c139bf47f","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"cc19161f-32cc-4db7-b06d-c30e938bed0d","root":false,"$title":"Obter data inicial","$position":{"top":"404px","left":"643px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"d5f7c7b6-fd6c-44f2-aa9a-319f7d256c4f":{"$contentActions":[{"action":{"$id":"690c9e33-6ab3-461e-ab3a-c9a4e69f407b","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"7c558b87-c46b-4ab3-a957-5f24c3657559","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"7c558b87-c46b-4ab3-a957-5f24c3657559","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"256cf234-59e4-423c-bb05-7173600bf238","$typeOfContent":"text","type":"SendMessage","settings":{"id":"e7bc33b3-8746-4201-a4f8-8f763005265f","type":"text/plain","content":"De quantos em quantos dias será o intervalo entre as datas ?","metadata":{}},"$cardContent":{"document":{"id":"e7bc33b3-8746-4201-a4f8-8f763005265f","type":"text/plain","content":"De quantos em quantos dias será o intervalo entre as datas ?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"6948788b-927c-4bb6-878f-4a6e09867400","type":"text/plain","textContent":"Entrada do usuário","content":"period"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"period"},"$invalid":false}],"$conditionOutputs":[{"stateId":"91c91896-2282-46be-b2d7-e65fe7ad4f9d","typeOfStateId":"state","$connId":"con_23","$id":"d9a9c6ec-0443-4257-8a6e-a4b77cfc2204","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"d5f7c7b6-fd6c-44f2-aa9a-319f7d256c4f","root":false,"$title":"Obter período","$position":{"top":"559px","left":"643px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"91c91896-2282-46be-b2d7-e65fe7ad4f9d":{"$contentActions":[{"action":{"$id":"20e1c058-95b6-4b75-8e30-49e8efdd643d","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"878862c9-2f0e-44e3-8faa-42b5d313d08f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"878862c9-2f0e-44e3-8faa-42b5d313d08f","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"6695b64b-5fb8-4f85-b48a-4c3769d47224","$typeOfContent":"text","type":"SendMessage","settings":{"id":"5f5cbe28-693e-4cf4-9419-f107a84bfd4e","type":"text/plain","content":"Por quantas vezes deseja calcular a data?","metadata":{}},"$cardContent":{"document":{"id":"5f5cbe28-693e-4cf4-9419-f107a84bfd4e","type":"text/plain","content":"Por quantas vezes deseja calcular a data?"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":false,"$cardContent":{"document":{"id":"0c63992a-ab17-497a-a3ed-6fb7d5654f4b","type":"text/plain","textContent":"Entrada do usuário","content":"iteration"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false,"variable":"iteration"},"$invalid":false}],"$conditionOutputs":[{"stateId":"119432a9-1628-4ee6-9772-9941e465cff5","typeOfStateId":"state","$connId":"con_28","$id":"beaff91d-a07e-440b-9e51-69c9d240882c","conditions":[{"source":"input","comparison":"exists","values":[]}],"$invalid":false}],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"91c91896-2282-46be-b2d7-e65fe7ad4f9d","root":false,"$title":"Obter Iterações","$position":{"top":"726px","left":"647px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false},"119432a9-1628-4ee6-9772-9941e465cff5":{"$contentActions":[{"action":{"$id":"ec7069ba-9341-4b82-98c2-9d6897940f10","$typeOfContent":"chat-state","type":"SendMessage","settings":{"id":"67a72bec-ac30-4fe0-8c24-e8963ed95f34","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"$cardContent":{"document":{"id":"67a72bec-ac30-4fe0-8c24-e8963ed95f34","type":"application/vnd.lime.chatstate+json","content":{"state":"composing","interval":1000}},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"action":{"$id":"3a2baac1-bb5e-4b85-a0d6-da4c5365f069","$typeOfContent":"text","type":"SendMessage","settings":{"id":"f9335516-1447-49a9-9bf0-b638b6d44bbf","type":"text/plain","content":"{{processedDates}}","metadata":{}},"$cardContent":{"document":{"id":"f9335516-1447-49a9-9bf0-b638b6d44bbf","type":"text/plain","content":"{{processedDates}}"},"editable":true,"deletable":true,"position":"left"}},"$invalid":false},{"input":{"bypass":true,"$cardContent":{"document":{"id":"162465c8-966a-4c12-90be-0201d8a3ab9f","type":"text/plain","textContent":"Entrada do usuário","content":"Entrada do usuário"},"editable":false,"deletable":true,"position":"right","editing":false},"$invalid":false},"$invalid":false}],"$conditionOutputs":[],"$enteringCustomActions":[{"$id":"5f2fe404-ff9d-4393-a84e-0fc82db59a08","$typeOfContent":"","type":"ExecuteScript","$title":"Obter datas","$invalid":false,"settings":{"function":"run","source":"/**\n* All input variables needs to be passed as function param;\n* Objects received as param needs to be parsed. Ex.: JSON.parse(inputVariable1);\n* Objects returned needs to be stringfied. Ex.: JSON.stringify(inputVariable1);\n**/\nfunction run(startDateRaw, period,iteration) {\n\tlet returnDates = \"\"\n\tfunction parseDMY(stringDate){\n\t\tlet [d, m, y] = stringDate.split(/\\D/);\n\t\treturn new Date(parseInt(y),parseInt(m)-1,parseInt(d));\n\t}\n\tfunction addDaysToDate(date,period){\n  \t\tlet ms = date.getTime() + 86400000 * period;\n        return tomorrow = new Date(ms)\n\t}\n\tfunction getMonth(finalDate){\n  \t\tconst formatedFinalDate = finalDate.getMonth() == 0 ? 12 : finalDate.getMonth().toString().padStart(2, '0');\n  \t\treturn formatedFinalDate;\n\t}\n\tlet startDate = parseDMY(startDateRaw)\n\tlet finalDate = addDaysToDate(startDate,period);\n\treturnDates += `${finalDate.getDate().toString().padStart(2, '0')}/${getMonth(finalDate)}/${finalDate.getFullYear()}\\n`\t\n\tfor(let d=1;d<iteration;d++){\n\t\tfinalDate = addDaysToDate(finalDate,period);\n\t\treturnDates += `${finalDate.getDate().toString().padStart(2, '0')}/${getMonth(finalDate)}/${finalDate.getFullYear()}\\n`\n\t}\n\treturn returnDates; //Return value will be saved as \"Return value variable\" field name\n}","inputVariables":["initialDate","period","iteration"],"outputVariable":"processedDates","LocalTimeZoneEnabled":false},"conditions":[]}],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"119432a9-1628-4ee6-9772-9941e465cff5","root":false,"$title":"Mostrar dados","$position":{"top":"894px","left":"646px"},"$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false,"$invalid":false}},"globalActions":{"$contentActions":[],"$conditionOutputs":[],"$enteringCustomActions":[],"$leavingCustomActions":[],"$inputSuggestions":[],"$defaultOutput":{"stateId":"fallback","$invalid":false},"$tags":[],"id":"global-actions","$invalidContentActions":false,"$invalidOutputs":false,"$invalidCustomActions":false}}